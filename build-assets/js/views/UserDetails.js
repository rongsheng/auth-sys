define(["jquery","underscore","backbone","models/employee","text!templates/user-details.html","text!templates/error.html"],function(e,t,n,r,i,s){var o=Backbone.View.extend({compile:_.template(i),compileError:_.template(s),initialize:function(e){this.model=new r,this.id=e.id,this.hideControl=e.hideControl,_.bindAll(this,"fetchSuccess","fetchFailed","fetch","render")},fetch:function(){_.isEmpty(this.model.toJSON())?this.model.fetch({data:{id:this.id},reset:!0,success:this.fetchSuccess,error:this.fetchFailed}):this.showDetails(this.model.get("data"))},showDetails:function(t){var n=this.compile({data:t});e(this.el).html(n),this.hideControl&&(e(this.el).find(".modal-footer").remove(),e(this.el).find("a.close").remove())},fetchSuccess:function(e,t){t&&t.status=="success"?(t.data.to_date=="9999-01-01"&&(t.data.to_date="Today",this.model.set({to_date:"Today"})),this.showDetails(t.data)):this.showError("Failed to fetch user details")},fetchFailed:function(){this.showError("Failed to fetch user details, please refresh and try again.")},showError:function(t){e("#error-message").html(this.compileError({message:t}))},clearError:function(){e("#error-message").html("")},render:function(){return this.fetch(),!0}});return o});