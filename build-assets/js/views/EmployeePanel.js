define(["jquery","underscore","backbone","views/EmployeePagination","text!templates/employee-panel.html"],function(e,t,n,r,i){"use strict";var s=Backbone.View.extend({compilePanel:_.template(i),start:0,size:15,searchColumn:null,tmpColumn:"all",events:{"click #filter-clear":"clear","click .filter-column":"setSearchColumn","keyup #search-input":"search"},initialize:function(e){_.bindAll(this,"refresh"),this.start=e.start,this.size=e.size,this.keyword=null,this.allevents=e.allevents,this.allevents.on("panel:refresh",this.refresh)},clear:function(){e(this.el).find("#search-label").text("Any"),e(this.el).find("#search-input").val(""),this.searchColumn=null,this.tmpColumn="all",this.start=0,this.keyword=null,Backbone.history.navigate(this.getUrlBase(this.searchColumn,this.keyword)+(this.start+1),!0)},getUrlBase:function(e,t){return e&&t?"#"+e+"/"+t+"/":"#"},setSearchColumn:function(t){var n=e(t.currentTarget);this.tmpColumn=n.data("column"),e(this.el).find("#search-label").text(n.text()),e(this.el).find("#search-input").focus()},search:function(t){t.which==13&&(this.searchColumn=this.tmpColumn,this.keyword=e(t.currentTarget).val(),Backbone.history.navigate(this.getUrlBase(this.searchColumn,this.keyword)+(this.start+1),!0))},renderPagination:function(e,t){var n=e,e=e-2,i=e+(t>=5?5:t);e<0&&(e=0,i=5),i>t&&(e=e-(i-t)>=0?e-(i-t):0,i=t),this.pView&&this.pView.remove(),this.epView||(this.epView=new r),this.epView.setBaseUrl(this.getUrlBase(this.searchColumn,this.keyword)),this.epView.render(e,i,n,t)},refresh:function(e,t,n){var r=1;t%n==0?r=Math.floor(t/n):r=Math.floor(t/n)+1,this.renderPagination(e,r)},render:function(){e(this.el).append(this.compilePanel())}});return s});